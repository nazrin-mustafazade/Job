@using JobMVC.Models.Identity
@model JobMVC.VMs.EmployerVMs.VacancyEmployeeVM
<!DOCTYPE html>
<html lang="en">
<body class="bg-gray-200">
    <!-- This example requires Tailwind CSS v2.0+ -->
    <ul role="list" class=" px-8 py-16 grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
        @foreach (AppUser user in Model.Users)
        {
            <li class="col-span-1 flex flex-col text-center bg-white rounded-lg shadow divide-y divide-gray-200">
                <div class="flex-1 flex flex-col p-8">
                    <img class="w-32 h-32 flex-shrink-0 mx-auto rounded-full" src="~/images/@user.ImageUrl" alt="">
                    <h3 class="mt-6 text-gray-900 text-sm font-medium">@user.FirstName @user.LastName</h3>
                    <dl class="mt-1 flex-grow flex flex-col justify-between">
                        <dt class="sr-only">Job</dt>
                        <dd class="text-gray-500 text-sm">@user.Country</dd>
                        <dt class="sr-only">Salary</dt>
                        <dd class="mt-3">
                            <span class="px-2 py-1 text-green-800 text-xs font-medium bg-green-100 rounded-full">@user.City</span>
                        </dd>
                    </dl>
                </div>
                <div>
                    <div class="-mt-px flex divide-x divide-gray-200">
                        <div class="w-0 flex-1 flex">
                            <a asp-controller="Employer" asp-action="DetailsCV" asp-route-id="@user.Id" class="relative -mr-px w-0 flex-1 inline-flex items-center justify-center py-4 text-sm text-gray-700 font-medium border border-transparent rounded-bl-lg">
                                <!-- Heroicon name: solid/mail -->
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z" />
                                </svg>


                                <span class="ml-3">CV</span>
                            </a>
                            @if (Model.Vacancy.InterviewedEmployees is null || !Model.Vacancy.InterviewedEmployees.Employees.Contains(user))
                            {
                                <a asp-action="InterviewEmployee" asp-route-id="@user.Id" asp-route-vacancyid="@Model.Vacancy.VacancyId" class="interviewBtn relative -mr-px w-0 flex-1 inline-flex items-center justify-center py-4 text-sm text-yellow-700 font-medium border border-transparent rounded-bl-lg">
                                    <!-- Heroicon name: solid/mail -->
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155" />
                                    </svg>

                                    <span class="ml-3">Interview</span>
                                </a>

                            }
                            else if ((!(Model.Vacancy.InterviewedEmployees is null) && Model.Vacancy.InterviewedEmployees.Employees.Contains(user)) && (Model.Vacancy.AcceptedEmployee is null || !Model.Vacancy.AcceptedEmployee.Equals(user)))
                            {
                                <a asp-action="AcceptEmployee" asp-route-id="@user.Id" asp-route-vacancyid="@Model.Vacancy.VacancyId" class="relative -mr-px w-0 flex-1 inline-flex items-center justify-center py-4 text-sm text-green-700 font-medium border border-transparent rounded-bl-lg">
                                    <!-- Heroicon name: solid/mail -->
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z" />
                                    </svg>

                                    <span class="ml-3">Accept</span>
                                </a>
                            }
                            @if (Model.Vacancy.RejectedEmployees is null || !Model.Vacancy.RejectedEmployees.Employees.Contains(user))
                            {
                                <a asp-action="RejectEmployee" asp-route-id="@user.Id" asp-route-vacancyid="@Model.Vacancy.VacancyId" class="relative -mr-px w-0 flex-1 inline-flex items-center justify-center py-4 text-sm text-red-800 font-medium border border-transparent rounded-bl-lg">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.182 16.318A4.486 4.486 0 0012.016 15a4.486 4.486 0 00-3.198 1.318M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z" />
                                    </svg>
                                    <span class="ml-3">Reject</span>
                                </a>

                            }


                        </div>

                    </div>
                </div>
            </li>
        }




        <!-- More people... -->
    </ul>

    <div id="interviewDiv" class=" hidden fixed z-10 inset-0 overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div id="backInterviewDiv" class="opacity-0 ease-in duration-200 fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>

            <!-- This element is to trick the browser into centering the modal contents. -->
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

            <div id="modalInterviewDiv" class="opacity-0 ease-in duration-200 translate-y-4 sm:translate-y-0 sm:scale-95 relative inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6">
                <div>

                    <div class="mt-3 text-center sm:mt-5">
                        <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title">Location and Date</h3>
                        <div class="mt-2">
                            <div class="flex items-start space-x-4">
                                <div class="min-w-0 flex-1">
                                    <form action="#">
                                        <div class="border-b border-gray-200 focus-within:border-indigo-600">
                                            <textarea rows="3" class="border-indigo-600 block w-full border-0 border-b border-transparent p-0 pb-2 resize-none focus:ring-0 focus:border-indigo-600 sm:text-sm"></textarea>
                                        </div>

                                    </form>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense">
                    <button type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:col-start-2 sm:text-sm">Submit</button>
                    <button type="button" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm">Cancel</button>
                </div>
            </div>
        </div>
    </div>


</body>

<script>
    let buttons = document.querySelectorAll('.interviewBtn')
    let interviewDiv = document.getElementById('interviewDiv')
    let backInterviewDiv = document.getElementById('backInterviewDiv')
    let modalInterviewDiv = document.getElementById('modalInterviewDiv')
    for(let i=0;i<buttons.length;i++){
        buttons[i].addEventListener("click",function(){
            interviewDiv.classList.remove('hidden')

            if (backInterviewDiv.classList.contains('opacity-0', 'ease-in', 'duration-200')) {
                backInterviewDiv.classList.remove('opacity-0', 'ease-in', 'duration-200')
                backInterviewDiv.classList.add('ease-out', 'duration-300', 'opacity-100')

            } else {
                backInterviewDiv.classList.add('opacity-0', 'ease-in', 'duration-200')
                backInterviewDiv.classList.remove('ease-out', 'duration-300', 'opacity-100')
            }
            modalInterviewDiv.classList.remove('opacity-0', 'ease-in', 'duration-200', 'translate-y-4', 'sm:translate-y-0', 'sm:scale-95')
            modalInterviewDiv.classList.add('ease-out', 'duration-300', 'opacity-100', 'translate-y-0', 'sm:scale-100')
        });
    }

</script>


</html>
